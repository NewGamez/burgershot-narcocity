<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Kleiderordnung | Burgershot</title>
    <link rel="stylesheet" href="style.css">
    <style>
    /* Hintergrund & Container */
    body { background-attachment: fixed; }
    .dresscode-container { max-width: 1100px; margin: 0 auto; padding: 40px 20px; }
    
    /* √úberschriften */
    h1 { font-size: 2.5rem; color: var(--primary); text-shadow: 0 0 20px rgba(250,172,21,0.4); }

    /* Admin Bereich Styling */
    .admin-only { 
        background: rgba(255, 255, 255, 0.03); 
        backdrop-filter: blur(10px);
        padding: 30px; 
        border-radius: 20px; 
        border: 1px solid rgba(250, 172, 21, 0.3);
        margin-bottom: 50px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    }

    /* Outfit Karten Layout */
    #outfitList {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(450px, 1fr));
        gap: 30px;
    }

    .outfit-card {
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(15px);
        border-radius: 20px;
        border: 1px solid rgba(255,255,255,0.1);
        overflow: hidden;
        display: flex;
        flex-direction: column;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .outfit-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 40px rgba(0,0,0,0.4);
        border-color: var(--primary);
    }

    /* Bild-Bereich */
    .outfit-image {
        width: 100%;
        height: 350px;
        overflow: hidden;
        background: #111;
        border-bottom: 2px solid var(--primary);
    }

    .outfit-image img {
        width: 100%;
        height: 100%;
        object-fit: cover; /* Verhindert Verzerrung */
        transition: transform 0.5s ease;
    }

    .outfit-card:hover .outfit-image img {
        transform: scale(1.05);
    }

    /* Text-Bereich */
    .outfit-info {
        padding: 25px;
        position: relative;
    }

    .outfit-info h2 {
        margin: 0 0 15px 0;
        color: var(--primary);
        font-size: 1.6rem;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .outfit-info ul {
        margin: 0;
        padding: 0;
        list-style: none;
    }

    .outfit-info li {
        padding: 8px 0;
        border-bottom: 1px solid rgba(255,255,255,0.05);
        font-size: 0.95rem;
        opacity: 0.9;
        display: flex;
        align-items: center;
    }

    .outfit-info li::before {
        content: "‚Ä¢";
        color: var(--primary);
        margin-right: 10px;
        font-weight: bold;
    }

    /* L√∂schen Button Schicker */
    .delete-outfit {
        position: absolute;
        top: 20px;
        right: 20px;
        background: rgba(231, 76, 60, 0.8);
        border: none;
        color: white;
        padding: 8px 15px;
        border-radius: 8px;
        font-size: 0.75rem;
        cursor: pointer;
        opacity: 0;
        transition: opacity 0.3s;
    }

    .outfit-card:hover .delete-outfit {
        opacity: 1;
    }
</style>
</head>
<body>

<header>
    <a href="index.html" class="brand-link">üçî Burgershot Intern</a>
    <button onclick="location.href='index.html'" style="background: #222;">üè† Dashboard</button>
</header>

<section class="dresscode-container">
    <h1 style="text-align: center; margin-bottom: 10px;">üëî Kleiderordnung</h1>
    <p style="text-align: center; opacity: 0.6; margin-bottom: 40px;">Offizielle Outfits f√ºr den Dienst</p>

    <div id="adminOutfitPanel" class="admin-only">
        <h3>‚ûï Neues Outfit hinzuf√ºgen</h3>
        <input type="text" id="outfitRole" placeholder="Rollen-Name (z.B. Service)">
        <textarea id="outfitDesc" placeholder="Beschreibung & Regeln (Stichpunkte mit Komma trennen)"></textarea>
        <label style="display: block; margin-bottom: 5px; font-size: 0.8rem;">Outfit-Bild hochladen:</label>
        <input type="file" id="outfitImgFile" accept="image/*">
        <button onclick="addOutfit()" style="width: 100%; margin-top: 10px;">Outfit Speichern</button>
    </div>

    <div id="outfitList">
        </div>
</section>

<script src="script.js"></script>
<script>
    requireLogin();

    // Outfits aus Speicher laden oder Standard setzen
    let outfits = JSON.parse(localStorage.getItem("bs_outfits")) || [
        {
            id: 1,
            role: "Management",
            desc: "Wei√ües Hemd, Schwarze Anzughose, Gepflegte Schuhe",
            img: "https://via.placeholder.com/400x500?text=Beispiel+Bild"
        }
    ];

    function renderOutfits() {
        const list = document.getElementById("outfitList");
        list.innerHTML = "";
        const admin = isAdmin();

        // Admin-Panel anzeigen, wenn berechtigt
        if(admin) document.getElementById("adminOutfitPanel").style.display = "block";

        outfits.forEach((o, index) => {
            const div = document.createElement("div");
            div.className = "outfit-card";
            
            // Beschreibung in Liste umwandeln
            const items = o.desc.split(',').map(item => `<li>${item.trim()}</li>`).join('');

            div.innerHTML = `
        <div class="outfit-image">
            <img src="${o.img}" alt="${o.role}">
        </div>
        <div class="outfit-info">
            ${admin ? `<button class="delete-outfit" onclick="deleteOutfit(${index})">L√∂schen</button>` : ''}
            <h2>üëî ${o.role}</h2>
            <ul>${items}</ul>
        </div>
    `;

    function addOutfit() {
        const role = document.getElementById("outfitRole").value;
        const desc = document.getElementById("outfitDesc").value;
        const fileInput = document.getElementById("outfitImgFile");
        
        if(!role || !desc || !fileInput.files[0]) return alert("Bitte alles ausf√ºllen!");

        const reader = new FileReader();
        reader.onload = function(e) {
            const base64Image = e.target.result; // Das Bild als Code
            
            outfits.push({
                id: Date.now(),
                role: role,
                desc: desc,
                img: base64Image
            });

            localStorage.setItem("bs_outfits", JSON.stringify(outfits));
            renderOutfits();
            
            // Felder leeren
            document.getElementById("outfitRole").value = "";
            document.getElementById("outfitDesc").value = "";
            fileInput.value = "";
        };
        reader.readAsDataURL(fileInput.files[0]);
    }

    function deleteOutfit(index) {
        if(!confirm("Outfit wirklich entfernen?")) return;
        outfits.splice(index, 1);
        localStorage.setItem("bs_outfits", JSON.stringify(outfits));
        renderOutfits();
    }

    renderOutfits();
</script>
</body>
</html>
