<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Burgershot Dashboard</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<header>
    <div class="brand-link">ğŸ” Burgershot Intern</div>
    <div style="display:flex; align-items:center; gap:15px;">
        <span id="userDisplay"></span>
        <button class="add-btn" style="background: #444; color: white;" onclick="logout()">Logout</button>
    </div>
</header>

<section class="dashboard">
    <div class="dashboard-grid">
        <div class="panel" onclick="location.href='abmeldungen.html'" style="cursor:pointer;">
            <h3 style="color:var(--accent); margin-bottom:15px;">ğŸ“… Abmeldungen</h3>
            <div id="absPreview"></div>
        </div>

        <div class="panel"><h3>ğŸ›’ EinkÃ¤ufe</h3><p style="color:#444;">In KÃ¼rze...</p></div>
        <div class="panel"><h3>ğŸµ Musik</h3><p style="color:#444;">In KÃ¼rze...</p></div>

        <div class="panel full-width" id="adminPanel" style="display:none; cursor:pointer; border-color: gold;" onclick="location.href='management.html'">
            <h3 style="color:gold;">â­ Management Center</h3>
            <p>Personalverwaltung & RÃ¤nge verwalten</p>
        </div>
    </div>
</section>

<script src="script.js"></script>
<script>
    requireLogin();
    
    function init() {
        document.getElementById("userDisplay").innerText = "Moin, " + sessionStorage.getItem("loggedInUser");
        
        // Admin-Check
        if(isAdmin()) document.getElementById("adminPanel").style.display = "block";

        // Vorschau Abmeldungen
        const div = document.getElementById("absPreview");
        const data = getAbsences().slice(-3).reverse();
        div.innerHTML = data.length ? "" : "<p style='color:#444;'>Keine EintrÃ¤ge</p>";
        data.forEach(a => {
            div.innerHTML += `<div style="padding:8px 0; border-bottom:1px solid #222;">${a.name} <small style="color:#888;">(${a.time})</small></div>`;
        });
    }
    window.onload = init;
</script>
</body>
</html>
