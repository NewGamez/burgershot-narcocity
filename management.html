<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Management Center</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<header>
    <a href="index.html" class="brand-link">ğŸ” Burgershot Intern</a>
</header>

<section class="dashboard">

<div class="panel management-wrapper">

    <!-- NAVIGATION -->
    <div class="management-tabs">
        <button onclick="showSection('accounts')">Accountverwaltung</button>
        <button onclick="showSection('mitarbeiter')">Mitarbeiterliste</button>
        <button onclick="showSection('dokumente')">Dokumente</button>
        <button onclick="showSection('sheets')">Sheets</button>
    </div>

    <!-- ================= ACCOUNTS ================= -->
    <div id="accounts" class="management-section">

        <h2>ğŸ‘¤ Accountverwaltung</h2>

        <div class="add-user-bar">
            <input type="text" id="newName" placeholder="Name">
            <select id="newRole">
                <option value="Mitarbeiter">Mitarbeiter</option>
                <option value="Management">Management</option>
                <option value="Cheffe">Cheffe</option>
            </select>
            <button onclick="addUser()">Einstellen</button>
        </div>

        <div class="account-table">
            <div class="table-head">
                <span>Name</span>
                <span>Rang</span>
                <span style="text-align:right;">Aktionen</span>
            </div>
            <div id="userList"></div>
        </div>

    </div>

    <!-- ================= MITARBEITERLISTE ================= -->
    <div id="mitarbeiter" class="management-section" style="display:none;">

        <h2>ğŸ“‹ Mitarbeiterliste</h2>

        <div class="add-user-bar">
            <input type="text" id="vorname" placeholder="Vorname">
            <input type="text" id="nachname" placeholder="Nachname">
            <input type="text" id="telefon" placeholder="Tel. Nr.">
            <input type="number" id="gehalt" placeholder="Gehalt">
            <button onclick="addMitarbeiter()">Eintragen</button>
        </div>

        <div class="account-table">
            <div class="table-head">
                <span>Name</span>
                <span>Telefon</span>
                <span>Gehalt</span>
                <span style="text-align:right;">Aktionen</span>
            </div>
            <div id="mitarbeiterList"></div>
        </div>

    </div>

    <!-- ================= DOKUMENTE ================= -->
    <div id="dokumente" class="management-section" style="display:none;">
        <h2>ğŸ“‚ Dokumente</h2>
        <p>Hier kÃ¶nnen spÃ¤ter PDF oder andere Dokumente eingebunden werden.</p>
    </div>

    <!-- ================= SHEETS ================= -->
    <div id="sheets" class="management-section" style="display:none;">
        <h2>ğŸ“Š Google Sheets</h2>
        <ul class="sheet-links">
            <li><a href="https://docs.google.com" target="_blank">ğŸ“ˆ UmsatzÃ¼bersicht</a></li>
            <li><a href="https://docs.google.com" target="_blank">ğŸ“‹ Mitarbeiterplanung</a></li>
        </ul>
    </div>

</div>

</section>

<script src="script.js"></script>
<script>

requireLogin();
if(!isAdmin()) window.location.href = "index.html";

/* ============================= */
/* SECTION SWITCHING */
/* ============================= */

function showSection(id) {
    document.querySelectorAll(".management-section")
        .forEach(sec => sec.style.display = "none");

    document.getElementById(id).style.display = "block";
}

/* ============================= */
/* MITARBEITER SYSTEM */
/* ============================= */

const getMitarbeiter = () =>
    JSON.parse(localStorage.getItem("bs_mitarbeiter")) || [];

const saveMitarbeiter = (data) =>
    localStorage.setItem("bs_mitarbeiter", JSON.stringify(data));

function addMitarbeiter() {
    const vorname = document.getElementById("vorname").value;
    const nachname = document.getElementById("nachname").value;
    const telefon = document.getElementById("telefon").value;
    const gehalt = document.getElementById("gehalt").value;

    if(!vorname || !nachname) return alert("Name fehlt.");

    const list = getMitarbeiter();
    list.push({ vorname, nachname, telefon, gehalt });
    saveMitarbeiter(list);
    renderMitarbeiter();
}

function renderMitarbeiter() {
    const container = document.getElementById("mitarbeiterList");
    container.innerHTML = "";

    const list = getMitarbeiter();

    list.forEach((m, index) => {
        const row = document.createElement("div");
        row.className = "table-row";

        row.innerHTML = `
            <span>${m.vorname} ${m.nachname}</span>
            <span>${m.telefon}</span>
            <span>${m.gehalt} â‚¬</span>
            <div style="text-align:right;">
                <button class="delete-btn" onclick="deleteMitarbeiter(${index})">Entfernen</button>
            </div>
        `;

        container.appendChild(row);
    });
}

function deleteMitarbeiter(index) {
    const list = getMitarbeiter();
    list.splice(index, 1);
    saveMitarbeiter(list);
    renderMitarbeiter();
}

document.addEventListener("DOMContentLoaded", () => {
    renderUsers();
    renderMitarbeiter();
});
</script>

</body>
</html>
