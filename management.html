<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Management Center</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<header>
    <a href="index.html" class="brand-link">‚Üê Zur√ºck</a>
    <span style="color: gold; font-weight: bold;">Management Center</span>
</header>

<div class="glass-card">
    <h2 style="color: var(--primary); margin-bottom: 20px;">üë§ Personalverwaltung</h2>
    
    <div style="display: flex; gap: 10px; margin-bottom: 30px;">
        <input type="text" id="newName" placeholder="Name" style="flex:1;">
        <select id="newRole">
            <option>Mitarbeiter/in</option>
            <option>Management</option>
            <option>Cheffe</option>
        </select>
        <button class="btn-gold" onclick="addUser()">Einstellen</button>
    </div>

    <div class="mgmt-header">
        <span>Name</span>
        <span>Rang</span>
        <span>Aktion</span>
    </div>
    <div id="userList"></div>
</div>

<script src="script.js"></script>
<script>
    function renderUsers() {
        const list = document.getElementById("userList");
        list.innerHTML = "";
        const accs = getAccounts();
        
        Object.keys(accs).forEach(name => {
            const row = document.createElement("div");
            row.className = "mgmt-row";
            row.innerHTML = `
                <span style="font-weight:bold;">${name}</span>
                <span style="opacity:0.7;">${accs[name].role}</span>
                <div>
                    ${name !== 'Admin' ? `<button class="btn-danger" onclick="delUser('${name}')">K√ºndigen</button>` : ''}
                </div>
            `;
            list.appendChild(row);
        });
    }
    window.onload = renderUsers;
</script>

<script src="script.js"></script>
<script>
    requireLogin();
    if(!isAdmin()) window.location.href = "index.html";

    function renderUsers() {
        const list = document.getElementById("userList");
        list.innerHTML = "";
        const accs = getAccounts();
    
        Object.keys(accs).forEach(name => {
            const row = document.createElement("div");
            row.className = "mgmt-grid"; // Benutzt jetzt das neue Grid-System
            row.innerHTML = `
                <span style="font-weight:bold;">${name}</span>
                <span style="color: #bbb;">${accs[name].role}</span>
                <div style="text-align:right;">
                    ${name !== 'Admin' ? `<button class="btn-danger" onclick="delUser('${name}')">K√ºndigen</button>` : ''}
                </div>
            `;
            list.appendChild(row);
        });
    }

    function addUser() {
        const name = document.getElementById("newName").value.trim();
        const role = document.getElementById("newRole").value;
        const accs = getAccounts();
        if(name && !accs[name]) {
            accs[name] = { password: "0000", role: role, isFirstLogin: true };
            saveAccounts(accs);
            renderUsers();
            document.getElementById("newName").value = "";
        } else {
            alert("Name ung√ºltig oder bereits vergeben.");
        }
    }

    function delUser(name) {
        if(name === "Admin") return alert("Admin kann nicht gel√∂scht werden.");
        if(confirm(name + " k√ºndigen?")) {
            const accs = getAccounts();
            delete accs[name];
            saveAccounts(accs);
            renderUsers();
        }
    }
    window.onload = renderUsers;
</script>
</body>
</html>
