<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Management Center</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<header>
    <a href="index.html" class="brand-link">‚Üê Zur√ºck</a>
    <span style="color:gold; font-weight:bold;">Management Center</span>
</header>

<section class="dashboard">
    <div class="panel" style="cursor:default;">

        <h3 style="margin-bottom:20px; color:gold;">üë§ Personalverwaltung</h3>

        <div style="display:flex; gap:10px; margin-bottom:20px;">
            <input type="text" id="newName" placeholder="Name">
            <select id="newRole">
                <option value="Mitarbeiter">Mitarbeiter</option>
                <option value="Management">Management</option>
                <option value="Cheffe">Cheffe</option>
            </select>
            <button onclick="addUser()">Einstellen</button>
        </div>

        <div id="userList"></div>

    </div>
</section>

<script src="script.js"></script>
<script>
requireLogin();
if(!isAdmin()) window.location.href = "index.html";

function renderUsers() {
    const list = document.getElementById("userList");
    list.innerHTML = "";
    const accs = getAccounts();

    Object.keys(accs).forEach(name => {
        const row = document.createElement("div");
        row.style.display = "flex";
        row.style.justifyContent = "space-between";
        row.style.marginBottom = "10px";

        row.innerHTML = `
            <span><strong>${name}</strong> (${accs[name].role})</span>
            <button onclick="delUser('${name}')">K√ºndigen</button>
        `;

        list.appendChild(row);
    });
}

function addUser() {
    const name = document.getElementById("newName").value.trim();
    const role = document.getElementById("newRole").value;
    const accs = getAccounts();

    if(name && !accs[name]) {
        accs[name] = { password: "0000", role: role, isFirstLogin: true };
        saveAccounts(accs);
        renderUsers();
        document.getElementById("newName").value = "";
    } else {
        alert("Name ung√ºltig oder bereits vergeben.");
    }
}

function delUser(name) {
    if(name === "Admin") return alert("Admin kann nicht gel√∂scht werden.");

    if(confirm(name + " k√ºndigen?")) {
        const accs = getAccounts();
        delete accs[name];
        saveAccounts(accs);
        renderUsers();
    }
}

window.onload = renderUsers;
</script>

</body>
</html>
